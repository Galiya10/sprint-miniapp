<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Спринт - Трекер привычек</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>
    <div class="app-container">
        <!-- Main Page -->
        <div id="mainPage">
            <!-- Fixed Header -->
            <header class="header">
                <h1 class="header-title">СПРИНТ</h1>
                <button class="xp-btn" id="xpBtn">
                    <span class="xp-count" id="xpCount">0</span>
                    <svg class="xp-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2Z" fill="#C5D375"/>
                    </svg>
                </button>
            </header>

            <!-- Fixed Week Calendar -->
            <div class="calendar-wrapper" id="calendarWrapper">
                <div class="week-calendar" id="weekCalendar"></div>
            </div>

            <!-- Habits List -->
            <div class="habits-list" id="habitsList">
                <button class="add-habit-btn" id="addHabitBtn">
                    <span class="plus-icon">+</span>
                    <span>добавить новую привычку</span>
                </button>
            </div>

            <!-- Sprint Card -->
            <div class="sprint-card" id="sprintCard">
                <img src="data:image/svg+xml,%3Csvg width='130' height='160' viewBox='0 0 130 160' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cellipse cx='65' cy='140' rx='35' ry='8' fill='%232C3744' opacity='0.3'/%3E%3Cpath d='M65 120C75 120 85 110 85 95V75C85 65 75 55 65 55C55 55 45 65 45 75V95C45 110 55 120 65 120Z' fill='%23C5D375'/%3E%3Ccircle cx='58' cy='80' r='3' fill='%231A1A1A'/%3E%3Ccircle cx='72' cy='80' r='3' fill='%231A1A1A'/%3E%3Cpath d='M58 90C58 90 61 93 65 93C69 93 72 90 72 90' stroke='%231A1A1A' stroke-width='2' stroke-linecap='round'/%3E%3Cpath d='M55 45C55 45 60 30 65 25C70 30 75 45 75 45' fill='%2388A84E'/%3E%3Cpath d='M50 55C50 55 45 50 40 52C45 57 50 60 50 60' fill='%2388A84E'/%3E%3Cpath d='M80 55C80 55 85 50 90 52C85 57 80 60 80 60' fill='%2388A84E'/%3E%3C/svg%3E" alt="Спринт" class="sprint-character">
                <div class="sprint-bubble">
                    <button class="sprint-close-btn" id="sprintCloseBtn">×</button>
                    <div class="bubble-header">
                        <span class="sprint-name">Спринт</span>
                    </div>
                    <p class="sprint-text">Привет! Я Спринт, твой садовник привычек. Посади свою первую привычку - поливать будем вместе</p>
                </div>
            </div>

            <!-- Bottom Navigation -->
            <nav class="bottom-nav">
                <button class="nav-item active" id="navToday">
                    <svg class="nav-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M19 4H5C3.89543 4 3 4.89543 3 6V20C3 21.1046 3.89543 22 5 22H19C20.1046 22 21 21.1046 21 20V6C21 4.89543 20.1046 4 19 4Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M16 2V6M8 2V6M3 10H21" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    <span class="nav-label">сегодня</span>
                </button>
                <button class="nav-item" id="navDuel">
                    <svg class="nav-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    <span class="nav-label">дуэль</span>
                </button>
                <button class="nav-item" id="navGarden">
                    <svg class="nav-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M12 16C14.2091 16 16 14.2091 16 12C16 9.79086 14.2091 8 12 8C9.79086 8 8 9.79086 8 12C8 14.2091 9.79086 16 12 16Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    <span class="nav-label">сад</span>
                </button>
                <button class="nav-item" id="navHistory">
                    <svg class="nav-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M12 8V12L15 15" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M3.05 11H5.05C6.15 11 7.05 10.1 7.05 9C7.05 7.9 6.15 7 5.05 7H3.05" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M22 12C22 17.52 17.52 22 12 22C6.48 22 2 17.52 2 12C2 6.48 6.48 2 12 2C17.52 2 22 6.48 22 12Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    <span class="nav-label">история</span>
                </button>
            </nav>
        </div>

        <!-- Habits Page (Hidden by default) -->
        <div id="habitsPage" class="habits-page hidden">
            <div class="habits-content">
                <!-- Здоровье -->
                <div class="category-section">
                    <h2 class="category-title">Здоровье</h2>
                    <div class="habit-item">
                        <div class="habit-info">
                            <span class="habit-name">Сон по режиму</span>
                            <div class="habit-xp">
                                <svg class="xp-flower" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M8 1L9.545 5.505L14 7.09L9.545 8.675L8 13.18L6.455 8.675L2 7.09L6.455 5.505L8 1Z" fill="#C5D375"/>
                                </svg>
                                <span>10</span>
                            </div>
                        </div>
                        <button class="habit-add-btn" data-category="Здоровье" data-habit="Сон по режиму" data-xp="10">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M12 5V19M5 12H19" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                        </button>
                    </div>
                    <div class="habit-item">
                        <div class="habit-info">
                            <span class="habit-name">Прием витаминов</span>
                            <div class="habit-xp">
                                <svg class="xp-flower" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M8 1L9.545 5.505L14 7.09L9.545 8.675L8 13.18L6.455 8.675L2 7.09L6.455 5.505L8 1Z" fill="#C5D375"/>
                                </svg>
                                <span>2</span>
                            </div>
                        </div>
                        <button class="habit-add-btn" data-category="Здоровье" data-habit="Прием витаминов" data-xp="2">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M12 5V19M5 12H19" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                        </button>
                    </div>
                    <div class="habit-item">
                        <div class="habit-info">
                            <span class="habit-name">Больше воды</span>
                            <div class="habit-xp">
                                <svg class="xp-flower" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M8 1L9.545 5.505L14 7.09L9.545 8.675L8 13.18L6.455 8.675L2 7.09L6.455 5.505L8 1Z" fill="#C5D375"/>
                                </svg>
                                <span>2</span>
                            </div>
                        </div>
                        <button class="habit-add-btn" data-category="Здоровье" data-habit="Больше воды" data-xp="2">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M12 5V19M5 12H19" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                        </button>
                    </div>
                    <button class="add-category-btn">
                        <div>
                            <span class="plus-icon">+</span>
                            <span>добавить свою привычку</span>
                        </div>
                        <div class="habit-xp">
                            <svg class="xp-flower" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M8 1L9.545 5.505L14 7.09L9.545 8.675L8 13.18L6.455 8.675L2 7.09L6.455 5.505L8 1Z" fill="#C5D375"/>
                            </svg>
                            <span>2</span>
                        </div>
                    </button>
                </div>

                <!-- Спорт -->
                <div class="category-section">
                    <h2 class="category-title">Спорт</h2>
                    <div class="habit-item">
                        <div class="habit-info">
                            <span class="habit-name">Прогулка</span>
                            <div class="habit-xp">
                                <svg class="xp-flower" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M8 1L9.545 5.505L14 7.09L9.545 8.675L8 13.18L6.455 8.675L2 7.09L6.455 5.505L8 1Z" fill="#C5D375"/>
                                </svg>
                                <span>5</span>
                            </div>
                        </div>
                        <button class="habit-add-btn" data-category="Спорт" data-habit="Прогулка" data-xp="5">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M12 5V19M5 12H19" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                        </button>
                    </div>
                    <div class="habit-item">
                        <div class="habit-info">
                            <span class="habit-name">Зарядка</span>
                            <div class="habit-xp">
                                <svg class="xp-flower" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M8 1L9.545 5.505L14 7.09L9.545 8.675L8 13.18L6.455 8.675L2 7.09L6.455 5.505L8 1Z" fill="#C5D375"/>
                                </svg>
                                <span>5</span>
                            </div>
                        </div>
                        <button class="habit-add-btn" data-category="Спорт" data-habit="Зарядка" data-xp="5">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M12 5V19M5 12H19" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                        </button>
                    </div>
                    <div class="habit-item">
                        <div class="habit-info">
                            <span class="habit-name">Тренировка</span>
                            <div class="habit-xp">
                                <svg class="xp-flower" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M8 1L9.545 5.505L14 7.09L9.545 8.675L8 13.18L6.455 8.675L2 7.09L6.455 5.505L8 1Z" fill="#C5D375"/>
                                </svg>
                                <span>10</span>
                            </div>
                        </div>
                        <button class="habit-add-btn" data-category="Спорт" data-habit="Тренировка" data-xp="10">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M12 5V19M5 12H19" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                        </button>
                    </div>
                    <div class="habit-item">
                        <div class="habit-info">
                            <span class="habit-name">Йога/пилатес</span>
                            <div class="habit-xp">
                                <svg class="xp-flower" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M8 1L9.545 5.505L14 7.09L9.545 8.675L8 13.18L6.455 8.675L2 7.09L6.455 5.505L8 1Z" fill="#C5D375"/>
                                </svg>
                                <span>5</span>
                            </div>
                        </div>
                        <button class="habit-add-btn" data-category="Спорт" data-habit="Йога/пилатес" data-xp="5">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M12 5V19M5 12H19" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                        </button>
                    </div>
                    <button class="add-category-btn">
                        <div>
                            <span class="plus-icon">+</span>
                            <span>добавить свою привычку</span>
                        </div>
                        <div class="habit-xp">
                            <svg class="xp-flower" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M8 1L9.545 5.505L14 7.09L9.545 8.675L8 13.18L6.455 8.675L2 7.09L6.455 5.505L8 1Z" fill="#C5D375"/>
                            </svg>
                            <span>5</span>
                        </div>
                    </button>
                </div>

                <!-- Новая категория -->
                <button class="add-category-btn-large">
                    <span class="plus-icon">+</span>
                    <span>Своя категория</span>
                </button>

                <!-- Bottom Navigation for Habits Page -->
                <nav class="bottom-nav">
                    <button class="nav-item" id="navToday2">
                        <svg class="nav-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M19 4H5C3.89543 4 3 4.89543 3 6V20C3 21.1046 3.89543 22 5 22H19C20.1046 22 21 21.1046 21 20V6C21 4.89543 20.1046 4 19 4Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M16 2V6M8 2V6M3 10H21" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        <span class="nav-label">сегодня</span>
                    </button>
                    <button class="nav-item" id="navDuel2">
                        <svg class="nav-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        <span class="nav-label">дуэль</span>
                    </button>
                    <button class="nav-item" id="navGarden2">
                        <svg class="nav-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M12 16C14.2091 16 16 14.2091 16 12C16 9.79086 14.2091 8 12 8C9.79086 8 8 9.79086 8 12C8 14.2091 9.79086 16 12 16Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        <span class="nav-label">сад</span>
                    </button>
                    <button class="nav-item" id="navHistory2">
                        <svg class="nav-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 8V12L15 15" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M3.05 11H5.05C6.15 11 7.05 10.1 7.05 9C7.05 7.9 6.15 7 5.05 7H3.05" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M22 12C22 17.52 17.52 22 12 22C6.48 22 2 17.52 2 12C2 6.48 6.48 2 12 2C17.52 2 22 6.48 22 12Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        <span class="nav-label">история</span>
                    </button>
                </nav>
            </div>
        </div>

        <!-- Modal for Habit Stats -->
        <div id="habitStatsModal" class="modal-overlay hidden">
            <div class="modal-content">
                <div class="modal-header">
                    <h2 class="modal-title" id="modalHabitName">Название привычки</h2>
                    <button class="modal-close" id="modalClose">×</button>
                </div>
                <div class="modal-body">
                    <div class="stats-section">
                        <h3>Статистика</h3>
                        <div class="stat-item">
                            <span class="stat-label">Всего выполнений:</span>
                            <span class="stat-value" id="totalCompletions">0</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">XP за привычку:</span>
                            <div class="stat-xp">
                                <svg class="xp-flower-small" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M8 1L9.545 5.505L14 7.09L9.545 8.675L8 13.18L6.455 8.675L2 7.09L6.455 5.505L8 1Z" fill="#C5D375"/>
                                </svg>
                                <span id="habitXP">0</span>
                            </div>
                        </div>
                    </div>
                    <div class="modal-actions">
                        <button class="btn-edit" id="btnEdit">Редактировать</button>
                        <button class="btn-delete" id="btnDelete">Удалить привычку</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>